<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>경기 광주 중앙공원</title>
  <meta name="keywords" content="경기 광주 중앙공원">
  <meta name="application-name" content="경기 광주 중앙공원">
  <meta name="msapplication-tooltip" content="경기 광주 중앙공원">
  <meta id="meta_og_title" property="og:title" content="경기 광주 중앙공원">
  <meta name="description" content="경기 광주 중앙공원">
  <meta property="og:description" content="경기 광주 중앙공원">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta property="og:image:width" content="800">
<meta property="og:image:height" content="627">
<link rel="stylesheet" href="/assets/style/style.css">

  <style>
    .logo {
      position: fixed;
    }
    .main-section-type3 {
    }
    .main-type3 {
      position: fixed;
      top: 0;
      width: 100%;
      height: 100%;
      display: none;
      background: #1d3b2e;
    }
    .main-section-2 {
      height: auto;
      padding: 10vh 0 0;
      font-size: 2rem;
    }
    body {
      overscroll-behavior: none;
      overflow-x: hidden;
    }
    #show-scene-0 #scroll-section-0 .main-type3 {
      display: block;
      will-change: transform, opacity;
    }
  </style>
</head>
<body>
<main class="main">
  <section class="main-section-type3" id="scroll-section-0">
    <strong class="logo"><img src="/assets/images/common/logo.png" alt="경기 광주 중앙공원"></strong>
    <div class="main-type3">
<!--      <div class="video-area">-->
        <div class="video-arch">
          <div class="video-content">
            <video autoplay="" loop="" muted="muted" class="video">
              <source src="/video/video.mp4" type="video/mp4">
            </video>
          </div>
        </div>
<!--      </div>-->
    </div>
  </section>
  <section class="main-section main-section-2" id="scroll-section-1">
    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aperiam consectetur eaque eveniet expedita explicabo hic iure molestiae nam necessitatibus perferendis porro quaerat qui, quidem, quos reiciendis repudiandae sunt totam ullam voluptate voluptates voluptatibus, voluptatum. Adipisci assumenda dignissimos fugit impedit magnam molestias quidem quis ut veritatis voluptatibus! A amet aperiam assumenda aut autem consequuntur dignissimos, doloremque eos est ex fugiat fugit impedit in ipsa iure modi nemo neque, numquam odit perferendis, quam qui quia quidem quis quo quod ratione repellendus rerum sint unde vel veniam voluptates voluptatum. Asperiores assumenda cupiditate non officiis? A alias aspernatur culpa cupiditate dicta dolore, facilis fugit impedit libero magni necessitatibus nihil numquam omnis quidem ratione repellendus sunt tenetur veniam. Iste iure natus quae recusandae vel, voluptatem voluptatum! Asperiores autem blanditiis corporis delectus dolor dolore dolorem doloremque doloribus dolorum earum eius enim error, est explicabo harum hic inventore iure laudantium libero magni minima minus molestias nam nostrum officiis omnis pariatur quaerat quam quia quo rem repudiandae, sed sequi sint totam velit voluptas. Amet dolor excepturi expedita iure nesciunt qui sapiente similique. Aliquam asperiores, at corporis cum harum laboriosam placeat possimus ratione suscipit tenetur totam ut voluptas. Dolorum eos excepturi incidunt pariatur perferendis porro sapiente sequi unde.
    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid animi aperiam architecto at autem consequatur, cupiditate dicta ducimus et excepturi harum iusto labore mollitia nam neque omnis quia ratione reiciendis repellat similique soluta sunt unde ut! At autem deleniti doloremque dolores, ex exercitationem ipsa, ipsum iste magni natus neque nihil optio possimus praesentium rem reprehenderit saepe veritatis. Ad atque autem dolorem doloribus earum facilis harum illum laboriosam libero maiores nostrum, nulla quas quod reiciendis rem sed similique voluptatum. Aut dolor dolorum ducimus esse ex, molestiae nemo nihil nobis obcaecati officia ratione repellendus repudiandae rerum sequi similique, veritatis vitae. Aspernatur dolorum et ex, non odio odit quidem repellendus voluptate voluptatum. Aut deleniti dolorum eius ex harum illo, iure obcaecati odio? Aliquam asperiores dolore earum et explicabo incidunt, itaque, laudantium non nulla obcaecati officiis omnis quis quisquam ratione sed voluptas voluptatibus. A asperiores consectetur consequuntur cum dicta dolores doloribus et eveniet excepturi impedit laboriosam libero magnam maiores nam natus neque, quibusdam rem repellendus reprehenderit saepe sed similique temporibus vel velit vero. Alias aliquid animi asperiores explicabo id, iure laborum odit reiciendis rerum suscipit! Aliquid aspernatur cumque debitis distinctio ducimus ex facilis hic illum itaque iure iusto magni, minus molestiae nemo, neque nesciunt, nobis officia quia quo quos saepe sequi sint tempora tenetur totam unde vero? Aperiam nam nostrum numquam possimus quas quia reprehenderit soluta totam? Architecto beatae culpa cum cupiditate dolore dolores error eveniet expedita facere illo ipsum nesciunt nisi numquam pariatur perferendis, placeat quaerat quidem sapiente tempora ullam unde voluptate voluptates. Assumenda dolorum explicabo iste officiis praesentium repudiandae sint temporibus totam veniam veritatis! Accusantium aspernatur esse id impedit minus nesciunt sequi vero. Expedita nostrum qui totam voluptate! Adipisci aperiam assumenda, doloribus ducimus magni natus provident rerum sapiente temporibus voluptatem. Accusamus aliquid architecto assumenda, ex iste nam natus officiis perferendis, quidem saepe sapiente, tempora unde voluptas. Aliquam aliquid animi consequatur corporis debitis dolore doloribus dolorum ea eos est et excepturi fugiat harum, illum, iure laborum, molestias nam nobis nulla officia officiis qui quia quos repudiandae suscipit tenetur ullam ut vero voluptatem voluptatum. A ad aliquid animi, consectetur dolor ea ex exercitationem explicabo facilis illum impedit magnam modi, nam, nostrum nulla numquam perspiciatis quae quibusdam quisquam repellat reprehenderit sint suscipit totam unde veritatis vitae voluptates. Aliquam consequatur fugiat id illo laboriosam neque numquam officia perspiciatis, quis recusandae, sapiente totam veritatis? Accusantium adipisci at autem consectetur, cumque dolor doloremque incidunt ipsam minima minus neque nostrum nulla officiis placeat quidem ratione reiciendis tempora unde vitae voluptates. Aliquam cumque debitis delectus, deserunt distinctio dolor doloremque ducimus eos excepturi fugiat fugit id illum in inventore ipsa iure molestias nam, nostrum pariatur perferendis perspiciatis quae quidem reprehenderit saepe sequi ut vel veritatis voluptas voluptate voluptates. Asperiores, aspernatur, cum dolorem ducimus iure magnam maiores minus odio qui quibusdam quo sed sequi similique, tempore vel voluptate voluptatem. Ad adipisci aut cum dolor fugiat inventore, iure molestiae nam obcaecati odio porro possimus, reiciendis saepe sequi suscipit voluptate voluptatibus. Ad est exercitationem modi nihil, obcaecati placeat provident sed sequi, sunt temporibus voluptatem?
  </section>
</main>
<script>
  window.addEventListener('load', function () {
    const videoArch = document.querySelector('.video-arch')
    setTimeout(function () {
      videoArch.style = 'clip-path: inset(36% 40% round 700px 700px 56px 56px)'
    },500)
  });
  (() => {
    let yOffset = 0 //window.pageYOffset  대신 쓸 변수
    let prevScrollHeight = 0 // 현재 스크롤 위치보다 이전에 위치한 스크롤 센션들의 스크롤 높이의 합
    let currentScene = 0 //현재 활성화된 씬
    let enterNewScene = false //새로운 신이 시작되면 트루

    const sceneInfo = [
      {
        //0
        type: 'sticky',
        heightNum: 2, //브라우저높이의 5배로 scrollHeight 세팅
        scrollHeight: 0,
        objs: {
          container: document.querySelector('#scroll-section-0'),
          arch: document.querySelector('.video-arch'),
          mainContent: document.querySelector('.main-type3'),
        },
        values: {
          clip_path: [36, 40, -28, -28],
          video_opacity: [1, 0, { start: 0.95, end: 1}]
        }
      },
      {
        //0
        type: 'normal',
        scrollHeight: 0,
        objs: {
          container: document.querySelector('#scroll-section-1'),
        },
      }
    ]

    function setLayout() {
      // 각 스크롤 섹션의 높이 설정
      for(let i = 0; i < sceneInfo.length; i++) {
        if(sceneInfo[i].type === 'sticky') {
          sceneInfo[i].scrollHeight = sceneInfo[i].heightNum * window.innerHeight;
        }else if(sceneInfo[i].type === 'normal'){
          sceneInfo[i].scrollHeight = sceneInfo[i].objs.container.offsetHeight;
        }
        sceneInfo[i].objs.container.style.height = `${sceneInfo[i].scrollHeight}px`
      }

      let totalScrollHeight = 0;
      yOffset = window.pageYOffset
      for(let i = 0; i < sceneInfo.length; i++) {
        totalScrollHeight += sceneInfo[i].scrollHeight;
        if (totalScrollHeight >= yOffset) {
          currentScene = i
          break;
        }
      }
      document.querySelector('body').setAttribute('id', `show-scene-${currentScene}`)
    }

    function scrollLoop() {
      enterNewScene = false;
      prevScrollHeight = 0;
      for (let i = 0 ; i < currentScene; i++) {
        prevScrollHeight += sceneInfo[i].scrollHeight
      }
      console.log(prevScrollHeight)
      if(yOffset > prevScrollHeight + sceneInfo[currentScene].scrollHeight) {
        enterNewScene = true;
        currentScene ++;
        document.querySelector('body').setAttribute('id', `show-scene-${currentScene}`)
      }
      if(yOffset < prevScrollHeight) {
        enterNewScene = true;
        if(currentScene === 0) return //브라우저 바운스 효과에 인해 마이너스가 되는것 방지(모바일)
        currentScene --;
        document.querySelector('body').setAttribute('id', `show-scene-${currentScene}`)
      }

      if (enterNewScene) return
      playAnimation();
    }

    function calcValues(values, currentYOffset) {
      let rv;
      // 현재 씬에서 스크롤된 범위를 비율로 구하기
      const scrollHeight = sceneInfo[currentScene].scrollHeight
      const scrollRatio = currentYOffset / scrollHeight;
      if (values.length === 3) {
        //start end 사이에 애니메이션 실행
        const partScrollStart = values[2].start * scrollHeight
        const partScrollEnd = values[2].end * scrollHeight
        const partScrollHeight = partScrollEnd - partScrollStart
        if(currentYOffset >= partScrollStart && currentYOffset <= partScrollEnd) {
          rv = (currentYOffset - partScrollStart) / partScrollHeight * (values[1]-values[0]) + values[0]
        }else if(currentYOffset < partScrollStart) {
          rv = values[0]
        } else if(currentYOffset < partScrollEnd) {
          rv = values[1]
        }

      }else {
        rv = [scrollRatio * (values[2]-values[0]) + values[0], scrollRatio * (values[3]-values[1]) + values[1]]
      }

      return rv;
    }

    function playAnimation() {
      const values = sceneInfo[currentScene].values
      const objs = sceneInfo[currentScene].objs
      const currentYOffset = yOffset - prevScrollHeight
      const scrollHeight = sceneInfo[currentScene].scrollHeight
      const scrollRatio = currentYOffset / scrollHeight
      // console.log(currentScene, currentYOffset, '$$$')
      switch (currentScene) {
        case 0:
          let clip_path_in = calcValues(values.clip_path,currentYOffset)
          objs.arch.style.clipPath = `inset(${clip_path_in[0]}% ${clip_path_in[1]}% round 50em 50em 4em 4em)`;
          console.log(clip_path_in)
          objs.mainContent.style.opacity = calcValues(values.video_opacity,currentYOffset)
          break;
        case 1:
          break;
        case 2:
          break;
        case 3:
          break;
      }
    }


    window.addEventListener('scroll', () => {
      yOffset = window.pageYOffset
      scrollLoop();
    })
    window.addEventListener('resize', setLayout)
    window.addEventListener('load', setLayout)
  })()

</script>
</body>
